<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>KD blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="KD blog">
<meta property="og:url" content="https://kingdee88.github.io/index.html">
<meta property="og:site_name" content="KD blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="KD blog">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">KD blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">主页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="http://od4ccuonf.bkt.clouddn.com/IMG_0345.JPG" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">主页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="http://od4ccuonf.bkt.clouddn.com/IMG_0345.JPG" />
            <h2 id="name">KD</h2>
            <h3 id="title">Web Developer &amp; Designer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>无锡, 中国</span>
            <a id="follow" target="_blank" href="https://github.com/kingdee88">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                7
                <span>文章</span>
            </div>
            <div class="article-info-block">
                7
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/kingdee88" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.zhihu.com/people/kingdee-77/activities" target="_blank" title="zhihu" class=tooltip>
                            <i class="fa fa-zhihu"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://www.jianshu.com/users/acb9303720b7/timeline" target="_blank" title="jianshu" class=tooltip>
                            <i class="fa fa-jianshu"></i>
                        </a>
                    </td>
                    
                    <td>
                      <a href="#" title="KingDee" class="tooltip">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    <td>
                       <a href="#" title="13915292235" class="tooltip">
                            <i class="fa fa-weixin"></i>
                        </a>
                    </td>
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-全面解析Javascript-this" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/22/全面解析Javascript-this/">全面解析Javascript-this</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/22/全面解析Javascript-this/">
            <time datetime="2017-02-22T00:56:46.000Z" itemprop="datePublished">2017-02-22</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript/">javascript</a>, <a class="tag-link" href="/tags/前端/">前端</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h3 id="为什么要写这篇文章？"><a href="#为什么要写这篇文章？" class="headerlink" title="为什么要写这篇文章？"></a>为什么要写这篇文章？</h3><p>谈及 Javascript 中的 this，竟然让人觉得头疼，它不像 Java，C++ 中的 this 指向调用 this 的该对象。</p>
<p><em>在函数中 this 到底取何值，是在函数真正被调用执行的时候确定下来的，函数定义的时候确定不了。 </em></p>
<p><em>因为 this 的取值是执行上下文环境的一部分，每次调用函数，都会产生一个新的执行上下文环境。当你在代码中使用了 this，这个 this 的值就直接从执行的上下文中获取了，而不会从作用域链中搜寻。</em></p>
<p>关于 this 的取值，大体上可以分为以下七种情况：</p>
<h3 id="情况一：全局-amp-调用普通函数"><a href="#情况一：全局-amp-调用普通函数" class="headerlink" title="情况一：全局 &amp; 调用普通函数"></a>情况一：全局 &amp; 调用普通函数</h3><p>在全局环境中，this 永远指向 window。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`console.log(this === window);     //<span class="literal">true</span></div></pre></td></tr></table></figure>
<p>`<br>普通函数在调用时候(注意不是构造函数，前面不加 new)，其中的 this 也是指向 window。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">`var x = 10;</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">foo</span></span>()&#123;</div><div class="line">console.log(this);     //Window</div><div class="line">console.log(this.x);   //10</div><div class="line">&#125;</div><div class="line">foo();</div></pre></td></tr></table></figure>
<p>`</p>
<h3 id="情况二：构造函数"><a href="#情况二：构造函数" class="headerlink" title="情况二：构造函数"></a>情况二：构造函数</h3><p>所谓的构造函数就是由一个函数 new 出来的对象，一般构造函数的函数名首字母大写，例如像 Object，Function，Array 这些都属于构造函数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">`<span class="keyword">function</span> <span class="function"><span class="title">Foo</span></span>()&#123;</div><div class="line">this.x = 10;</div><div class="line">console.log(this);    //Foo &#123;x:10&#125;</div><div class="line">&#125;</div><div class="line">var foo = new Foo();</div><div class="line">console.log(foo.x);      //10</div></pre></td></tr></table></figure>
<p>`<br>上述代码，如果函数作为构造函数使用，那么其中的 this 就代表它即将 new 出来的对象。</p>
<p>但是如果直接调用 Foo 函数，而不是 new Foo()，那就变成情况1，这时候 Foo() 就变成普通函数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">`<span class="keyword">function</span> <span class="function"><span class="title">Foo</span></span>()&#123;</div><div class="line">this.x = 10;</div><div class="line">console.log(this);    //Window</div><div class="line">&#125;</div><div class="line">var foo = Foo();</div><div class="line">console.log(foo.x);      //undefined</div></pre></td></tr></table></figure>
<p>`</p>
<h3 id="情况三：对象方法"><a href="#情况三：对象方法" class="headerlink" title="情况三：对象方法"></a>情况三：对象方法</h3><p>如果函数作为对象的方法时，方法中的 this 指向该对象。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123;</div><div class="line"> x: 10,</div><div class="line"> foo: <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line"> console.log(this); //Object </div><div class="line">console.log(this.x); //10 </div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">obj.foo();</div></pre></td></tr></table></figure>
<p>`<br>注意：若是在对象方法中定义函数，那么情况就不同了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123; </div><div class="line">x: 10,</div><div class="line"> foo: <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line"> <span class="keyword">function</span> <span class="function"><span class="title">f</span></span>()&#123; </div><div class="line">   console.log(this); //Window </div><div class="line">   console.log(this.x);//undefined </div><div class="line"> &#125;</div><div class="line"> f();</div><div class="line"> &#125;</div><div class="line"> &#125;</div><div class="line">obj.foo();</div></pre></td></tr></table></figure>
<p>`<br><em>可以这么理解：函数 f 虽然是在 obj.foo 内部定义的，但它仍然属于一个普通函数，this 仍指向 window。(这是个坑，要记牢) </em></p>
<p>在这里，如果想要调用上层作用域中的变量 obj.x，可以使用 self 缓存外部 this 变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123; </div><div class="line"> x: 10, </div><div class="line">foo: <span class="function"><span class="title">function</span></span> () &#123; </div><div class="line">var self = this; </div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">f</span></span>()&#123; </div><div class="line">console.log(self); //&#123;x: 10&#125; </div><div class="line">console.log(self.x); //10 &#125;</div><div class="line"> f();</div><div class="line"> &#125; </div><div class="line">&#125;</div><div class="line"> obj.foo();</div></pre></td></tr></table></figure>
<p>`<br>如果 foo 函数不作为对象方法被调用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123; </div><div class="line">x: 10, </div><div class="line">   foo: <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">   console.log(this); //Window </div><div class="line">   console.log(this.x); //undefined </div><div class="line">  &#125;  </div><div class="line">&#125;; </div><div class="line">var fn = obj.foo;</div><div class="line">fn();</div></pre></td></tr></table></figure>
<p>`<br>obj.foo 被赋值给一个全局变量，并没有作为 obj 的一个属性被调用，那么此时 this 的值是 window。</p>
<h3 id="情况四：构造函数-prototype-属性"><a href="#情况四：构造函数-prototype-属性" class="headerlink" title="情况四：构造函数 prototype 属性"></a>情况四：构造函数 prototype 属性</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">`<span class="keyword">function</span> <span class="function"><span class="title">Foo</span></span>()&#123; </div><div class="line">this.x = 10; </div><div class="line">&#125; </div><div class="line">Foo.prototype.getX = <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line"> console.log(this); //Foo</div><div class="line"> &#123;x: 10, getX: <span class="keyword">function</span>&#125;</div><div class="line"> console.log(this.x); //10 </div><div class="line">&#125; </div><div class="line">var foo = new Foo(); </div><div class="line">foo.getX();</div></pre></td></tr></table></figure>
<p>`<br>在 Foo.prototype.getX 函数中，this 指向的 foo 对象。不仅仅如此，即便是在整个原型链中，this 代表的也是当前对象的值。</p>
<h3 id="情况五：函数用-call、apply或者-bind-调用。"><a href="#情况五：函数用-call、apply或者-bind-调用。" class="headerlink" title="情况五：函数用 call、apply或者 bind 调用。"></a>情况五：函数用 call、apply或者 bind 调用。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123; x: 10 &#125; </div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">foo</span></span>()&#123; </div><div class="line">console.log(this); //&#123;x: 10&#125; </div><div class="line">console.log(this.x); //10 </div><div class="line">&#125; </div><div class="line">foo.call(obj); </div><div class="line">foo.apply(obj);</div><div class="line"> foo.bind(obj)();</div></pre></td></tr></table></figure>
<p>`<br>当一个函数被 call、apply 或者 bind 调用时，this 的值就取传入的对象的值。</p>
<h3 id="情况六：DOM-event-this"><a href="#情况六：DOM-event-this" class="headerlink" title="情况六：DOM event this"></a>情况六：DOM event this</h3><p>在一个 HTML DOM 事件处理程序里，this 始终指向这个处理程序所绑定的 HTML DOM 节点：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">`<span class="keyword">function</span> <span class="function"><span class="title">Listener</span></span>()&#123; </div><div class="line">document.getElementById(<span class="string">'foo'</span>).addEventListener(<span class="string">'click'</span>, this.handleClick); //这里的 this 指向 Listener 这个对象。不是强调的是这里的 this</div><div class="line"> &#125;</div><div class="line"> Listener.prototype.handleClick = <span class="keyword">function</span> (event) &#123; </div><div class="line">console.log(this); //\&lt;div id=<span class="string">"foo"</span>\&gt;\&lt;/div\&gt;</div><div class="line"> &#125;</div><div class="line"> var listener = new Listener(); document.getElementById(<span class="string">'foo'</span>).click();</div></pre></td></tr></table></figure>
<p>`<br>这个很好理解，就相当于是给函数传参，使 handleClick 运行时上下文改变了，相当于下面这样的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123;  </div><div class="line">    x: 10, fn: <span class="function"><span class="title">function</span></span> () &#123;  </div><div class="line">        console.log(this); //Window   </div><div class="line">        console.log(this.x); //undefined   </div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line">  </div><div class="line"><span class="keyword">function</span> foo[^1] &#123;  </div><div class="line">    fn();  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">foo(obj.fn);</div></pre></td></tr></table></figure>
<p>`<br>你也可以用通过 bind 切换上下文:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">`<span class="keyword">function</span> <span class="function"><span class="title">Listener</span></span>() &#123;  </div><div class="line">    document.getElementById(<span class="string">'foo'</span>).addEventListener(<span class="string">'click'</span>, this.handleClick.bind(this));  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">Listener.prototype.handleClick = <span class="keyword">function</span> (event) &#123;  </div><div class="line">    console.log(this);    //Listener &#123;&#125;  </div><div class="line">&#125;  </div><div class="line">var listener = new Listener();  </div><div class="line">document.getElementById(<span class="string">'foo'</span>).click();</div></pre></td></tr></table></figure>
<p>`<br>前六种情况总结一句话为： this 指向调用该方法的对象。</p>
<h3 id="情况七：箭头函数中的-this"><a href="#情况七：箭头函数中的-this" class="headerlink" title="情况七：箭头函数中的 this"></a>情况七：箭头函数中的 this</h3><p>当使用箭头函数的时候，情况就有所不同了：箭头函数内部的 this 是词法作用域，由上下文确定。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123;  </div><div class="line">    x: 10,  </div><div class="line">    foo: <span class="function"><span class="title">function</span></span>() &#123;  </div><div class="line">        var fn = () =\&gt; &#123;  </div><div class="line">            <span class="built_in">return</span> () =\&gt; &#123;  </div><div class="line">                <span class="built_in">return</span> () =\&gt; &#123;  </div><div class="line">                    console.log(this);      //Object &#123;x: 10&#125;  </div><div class="line">                    console.log(this.x);    //10  </div><div class="line">                &#125;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">        fn()()();  </div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line">obj.foo();</div></pre></td></tr></table></figure>
<p>`<br>现在，箭头函数完全修复了 this 的指向，this 总是指向词法作用域，也就是外层调用者 obj。<br>如果使用箭头函数，以前的这种 hack 写法：</p>
<p><code>var self = this;</code></p>
<p>就不再需要了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">`var obj = &#123;  </div><div class="line">    x: 10,  </div><div class="line">    foo: <span class="function"><span class="title">function</span></span>() &#123;  </div><div class="line">        var fn = () =\&gt; &#123;  </div><div class="line">            <span class="built_in">return</span> () =\&gt; &#123;  </div><div class="line">                <span class="built_in">return</span> () =\&gt; &#123;  </div><div class="line">                    console.log(this);    // Object &#123;x: 10&#125;  </div><div class="line">                    console.log(this.x);  //10  </div><div class="line">                &#125;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">        fn.bind(&#123;x: 14&#125;)()()();  </div><div class="line">        fn.call(&#123;x: 14&#125;)()();  </div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line">obj.foo();</div></pre></td></tr></table></figure>
<p>`<br>由于 this 在箭头函数中已经按照词法作用域绑定了，所以，用 call()或者 apply()调用箭头函数时，无法对 this 进行绑定，即传入的第一个参数被忽略。</p>
<h3 id="补充说明："><a href="#补充说明：" class="headerlink" title="补充说明："></a>补充说明：</h3><ul>
<li>this 为保留字，你不能重写 this。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">`<span class="keyword">function</span> <span class="function"><span class="title">test</span></span>()&#123;</div><div class="line">var this = &#123;&#125;;     //Uncaught SyntaxError: Unexpected token this</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>`</p>
<ul>
<li>宿主对象：</li>
</ul>
<ul>
<li>一门语言在运行的时候，需要一个环境，叫做宿主环境。</li>
<li>对于JavaScript，宿主环境最常见的是 web 浏览器，浏览器提供了一个 JavaScript 运行的环境，这个环境里面，需要提供一些接口，好让 JavaScript 引擎能够和宿主环境对接。</li>
<li>JavaScript 引擎才是真正执行 JavaScript 代码的地方，常见的引擎有 V8(目前最快 JavaScript 引擎、Google 生产)、JavaScript core。</li>
<li>在浏览器或者服务端( nodejs )都有自己的 JS 引擎，在浏览器中，全局对象为 window，而在 nodejs 中，全局对象为 global。</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/22/全面解析Javascript-this/" data-id="cizga3ya5000041emb9fhdb5u" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/22/全面解析Javascript-this/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/22/全面解析Javascript-this/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="javascript-缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串" class="article article-type-javascript" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/">缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/">
            <time datetime="2017-02-17T01:07:56.000Z" itemprop="datePublished">2017-02-17</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript/">javascript</a>, <a class="tag-link" href="/tags/前端/">前端</a>, <a class="tag-link" href="/tags/技巧/">技巧</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>因为平时在写代码的过程中，有些算法会经常重复写，比如数组去重、数组抽取随机值等！虽然这些不是很难的逻辑，但是每次刚开始遇到需求的时候，还是需要琢磨一些时间才能想出来，所以此文档把这些常见算法的思想记录下来，以便下次再遇到的时候不会手脚无措了！</li>
</ul>
<h3 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h3><ul>
<li><p>我们这里不考虑数组上的一个自带的过滤算法，比如map、filter等方法！数组去重的关键是需要一个中间数组来存数组来帮助实现数组去重！</p>
</li>
<li><p>方法一：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">`var arr = [1,2,3,1,1,1,1]();</div><div class="line"><span class="keyword">function</span> toHeavy(array)&#123;</div><div class="line">//这是一个缓存对象，用来实现过滤到重复的数据</div><div class="line">var cache = &#123;&#125;;</div><div class="line">//定义一个中间数组，用来实现当容器</div><div class="line">var cacheArr = []();</div><div class="line"><span class="keyword">for</span>(var i = 0,len = array.length;i\&lt;len;i++)&#123;</div><div class="line"><span class="keyword">if</span>(!cache[array\[i]()])&#123;</div><div class="line">cacheArr.push(array[i]());</div><div class="line">cache[array\[i]()] = array[i]();</div><div class="line">&#125;;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">return</span> cacheArr;</div><div class="line">&#125;;</div><div class="line">arr = toHeavy(arr);//arr ==  [1,2,3]()</div></pre></td></tr></table></figure>
<p>`</p>
<ul>
<li>方法二：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">`//其实思想跟第一个差不多</div><div class="line">var arr = [1,2,3,1,1,1,1,1,1]();</div><div class="line"><span class="keyword">function</span> toHeavy(array)&#123;</div><div class="line">var cache = []();</div><div class="line"><span class="keyword">for</span>(var i = 0,len = array.length;i\&lt;len;i++)&#123;</div><div class="line">//用闭包，防止isHeavy向外部暴露</div><div class="line">//因为js中没有块级作用域</div><div class="line">(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">var isHeavy = <span class="literal">false</span>;</div><div class="line"><span class="keyword">for</span>(var j = 0,_len = cache.length;j\&lt;_len;j++)&#123;</div><div class="line"><span class="keyword">if</span>(cache[j]() == array[i]())&#123;</div><div class="line">isHeavy = <span class="literal">true</span>;</div><div class="line"><span class="built_in">break</span>;</div><div class="line">&#125;;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">if</span>(!isHeavy)&#123;</div><div class="line">//如果不是重复的，那么就执行把当前值推送的cache里面</div><div class="line">cache.push(array[i]());</div><div class="line">&#125;;</div><div class="line">&#125;)();</div><div class="line">&#125;;</div><div class="line"><span class="built_in">return</span> cache;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">arr = toHeavy(arr);</div></pre></td></tr></table></figure>
<p>`<br>最后说一句，现实中的数据肯定不会这么简单，可能会是一个稍微复杂的数据，要给这些数组去重你也不要被吓住，其实原理是一样的，只是你被迷惑了而已！</p>
<h3 id="在一个数组中随机抽取一部分值"><a href="#在一个数组中随机抽取一部分值" class="headerlink" title="在一个数组中随机抽取一部分值"></a>在一个数组中随机抽取一部分值</h3><ul>
<li>这个算法的关键要使用Math.random，不说了直接上代码:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">`var arr = [<span class="string">'小明'</span>,<span class="string">'小红'</span>,<span class="string">'小陈'</span>,<span class="string">'小于'</span>,<span class="string">'小兰'</span>,<span class="string">'小法'</span>,<span class="string">'小p'</span>,<span class="string">'小张'</span>,<span class="string">'小镇'</span>,<span class="string">'小王'</span>,<span class="string">'傻逼'</span>,<span class="string">'怂逼'</span>]();</div><div class="line"></div><div class="line"><span class="keyword">function</span> getArr(num,array)&#123;</div><div class="line">//num表示要去多少个，它不能大于要取的那个数组的最大长度，如果超过了那么就等于它的长度</div><div class="line">var aLength = array.length;</div><div class="line"><span class="keyword">if</span>(num\&gt;=aLength)&#123;</div><div class="line">num = aLength;</div><div class="line">&#125;;</div><div class="line">var cacheArr = []();</div><div class="line">//我们用一个数组保存原来的数组</div><div class="line">//记住千万能直接赋值，因为数组是一个引用，这样不能保持原来的数组</div><div class="line">var originArr = (<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">var arr = []();</div><div class="line"><span class="keyword">for</span>(var i = 0,len = array.length;i\&lt;len;i++)&#123;</div><div class="line">arr.push(array[i]());</div><div class="line">&#125;;</div><div class="line"><span class="built_in">return</span> arr;</div><div class="line">&#125;)();</div><div class="line"><span class="keyword">for</span>(var i = 0;i\&lt;num;i++)&#123;</div><div class="line">//array.length不能写成上面的aLength，因为aLength是固定的值，而array.length随着array的改变是自动更新的</div><div class="line">//Math.random() * array.length得到的是一个介于长度和零之间的一个值，包括0但不包含长度值</div><div class="line">//我们算出的是一个浮点值，所以我们必须把它转化成整数</div><div class="line">//因为不能超过最大长度值，所以应该向下取整</div><div class="line">var _index = Math.floor(Math.random() * array.length);</div><div class="line">cacheArr.push(array[_index]());</div><div class="line">//记住一定，取出来之后，一定删除原来位置上的数组值</div><div class="line">//要不然数组更新不了</div><div class="line">array.splice(_index,1);</div><div class="line">&#125;;</div><div class="line">//取回原来的数组</div><div class="line">array = originArr;</div><div class="line">console.log(array);</div><div class="line"><span class="built_in">return</span> cacheArr;</div><div class="line">&#125;;</div><div class="line">var brr = getArr(5,arr);</div></pre></td></tr></table></figure>
<p>`</p>
<h3 id="得到某个区间的字母组成的数组"><a href="#得到某个区间的字母组成的数组" class="headerlink" title="得到某个区间的字母组成的数组"></a>得到某个区间的字母组成的数组</h3>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/" data-id="cizga355t00083cemk5jti3cq" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-彻底理解JS中this的指向" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/10/彻底理解JS中this的指向/">彻底理解JS中this的指向</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/10/彻底理解JS中this的指向/">
            <time datetime="2017-02-10T01:34:40.000Z" itemprop="datePublished">2017-02-10</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript/">javascript</a>, <a class="tag-link" href="/tags/前端/">前端</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>首先必须要说的是，this的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，实际上this的最终指向的是那个调用它的对象（这句话有些问题，后面会解释为什么会有问题，虽然网上大部分的文章都是这样说的，虽然在很多情况下那样去理解不会出什么问题，但是实际上那样理解是不准确的，所以在你理解this的时候会有种琢磨不透的感觉），那么接下来我会深入的探讨这个问题。</p>
<p>为什么要学习this？如果你学过函数式编程，面向对象编程，那你肯定知道干什么用的，如果你没有学过，那么暂时可以不用看这篇文章，当然如果你有兴趣也可以看看，毕竟这是js中必须要掌握的东西。</p>
<h3 id="例子1："><a href="#例子1：" class="headerlink" title="例子1："></a>例子1：</h3><pre><code>function a(){
    var user = &quot;追梦子&quot;;
    console.log(this.user); //undefined
    console.log(this); //Window
}
a();
</code></pre><p>按照我们上面说的this最终指向的是调用它的对象，这里的函数a实际是被Window对象所点出来的，下面的代码就可以证明</p>
<pre><code>function a(){
    var user = &quot;追梦子&quot;;
    console.log(this.user); //undefined
    console.log(this);　　//Window
}
window.a();
</code></pre><p>和上面代码一样吧，其实alert也是window的一个属性，也是window点出来的。</p>
<h3 id="例子2："><a href="#例子2：" class="headerlink" title="例子2："></a>例子2：</h3><pre><code>var o = {
    user:&quot;追梦子&quot;,
    fn:function(){
        console.log(this.user);  //追梦子
    }
}
o.fn();
</code></pre><p>这里的this指向的是对象o，因为你调用这个fn是通过o.fn()执行的，那自然指向就是对象o，这里再次强调一点，this的指向在函数创建的时候是决定不了的，在调用的时候才能决定，谁调用的就指向谁，一定要搞清楚这个。</p>
<p>其实例子1和例子2说的并不够准确，下面这个例子就可以推翻上面的理论。</p>
<p>如果要彻底的搞懂this必须看接下来的几个例子</p>
<h3 id="例子3："><a href="#例子3：" class="headerlink" title="例子3："></a>例子3：</h3><pre><code>var o = {
    user:&quot;追梦子&quot;,
    fn:function(){
        console.log(this.user); //追梦子
    }
}
window.o.fn();
</code></pre><p>这段代码和上面的那段代码几乎是一样的，但是这里的this为什么不是指向window，如果按照上面的理论，最终this指向的是调用它的对象，这里先说个而外话，window是js中的全局对象，我们创建的变量实际上是给window添加属性，所以这里可以用window点o对象。</p>
<p>这里先不解释为什么上面的那段代码this为什么没有指向window，我们再来看一段代码。</p>
<pre><code>var o = {
    a:10,
    b:{
        a:12,
        fn:function(){
            console.log(this.a); //12
        }
    }
}
o.b.fn();
</code></pre><p>这里同样也是对象o点出来的，但是同样this并没有执行它，那你肯定会说我一开始说的那些不就都是错误的吗？其实也不是，只是一开始说的不准确，接下来我将补充一句话，我相信你就可以彻底的理解this的指向的问题。</p>
<p>情况1：如果一个函数中有this，但是它没有被上一级的对象所调用，那么this指向的就是window，这里需要说明的是在js的严格版中this指向的不是window，但是我们这里不探讨严格版的问题，你想了解可以自行上网查找。</p>
<p>情况2：如果一个函数中有this，这个函数有被上一级的对象所调用，那么this指向的就是上一级的对象。</p>
<p>情况3：如果一个函数中有this，这个函数中包含多个对象，尽管这个函数是被最外层的对象所调用，this指向的也只是它上一级的对象，例子3可以证明，如果不相信，那么接下来我们继续看几个例子。</p>
<pre><code>var o = {
    a:10,
    b:{
        // a:12,
        fn:function(){
            console.log(this.a); //undefined
        }
    }
}
o.b.fn();
</code></pre><p>尽管对象b中没有属性a，这个this指向的也是对象b，因为this只会指向它的上一级对象，不管这个对象中有没有this要的东西。</p>
<h3 id="还有一种比较特殊的情况，例子4："><a href="#还有一种比较特殊的情况，例子4：" class="headerlink" title="还有一种比较特殊的情况，例子4："></a>还有一种比较特殊的情况，例子4：</h3><pre><code>var o = {
    a:10,
    b:{
        a:12,
        fn:function(){
            console.log(this.a); //undefined
            console.log(this); //window
        }
    }
}
var j = o.b.fn;
j();
</code></pre><p>这里this指向的是window，是不是有些蒙了？其实是因为你没有理解一句话，这句话同样至关重要。</p>
<p>this永远指向的是最后调用它的对象，也就是看它执行的时候是谁调用的，例子4中虽然函数fn是被对象b所引用，但是在将fn赋值给变量j的时候并没有执行所以最终指向的是window，这和例子3是不一样的，例子3是直接执行了fn。</p>
<p>his讲来讲去其实就是那么一回事，只不过在不同的情况下指向的会有些不同，上面的总结每个地方都有些小错误，也不能说是错误，而是在不同环境下情况就会有不同，所以我也没有办法一次解释清楚，只能你慢慢地的去体会。</p>
<h3 id="构造函数版this："><a href="#构造函数版this：" class="headerlink" title="构造函数版this："></a>构造函数版this：</h3><pre><code>function Fn(){
    this.user = &quot;追梦子&quot;;
}
var a = new Fn();
console.log(a.user); //追梦子
</code></pre><p>这里之所以对象a可以点出函数Fn里面的user是因为new关键字可以改变this的指向，将这个this指向对象a，为什么我说a是对象，因为用了new关键字就是创建一个对象实例，理解这句话可以想想我们的例子3，我们这里用变量a创建了一个Fn的实例（相当于复制了一份Fn到对象a里面），此时仅仅只是创建，并没有执行，而调用这个函数Fn的是对象a，那么this指向的自然是对象a，那么为什么对象Fn中会有user，因为你已经复制了一份Fn函数到对象a中，用了new关键字就等同于复制了一份。<br>除了上面的这些以外，我们还可以自行改变this的指向，关于自行改变this的指向请看JavaScript中<a href="http://www.cnblogs.com/pssp/p/5215621.html" target="_blank" rel="external">call,apply,bind</a>方法的总结这篇文章，详细的说明了我们如何手动更改this的指向。</p>
<h3 id="更新一个小问题当this碰到return时"><a href="#更新一个小问题当this碰到return时" class="headerlink" title="更新一个小问题当this碰到return时"></a>更新一个小问题当this碰到return时</h3><pre><code>function fn()  
{  
    this.user = &apos;追梦子&apos;;  
    return {};  
}
var a = new fn;  
console.log(a.user); //undefined
</code></pre><p>再看一个</p>
<pre><code>function fn()  
{  
    this.user = &apos;追梦子&apos;;  
    return function(){};
}
var a = new fn;  
console.log(a.user); //undefined
</code></pre><p>再来</p>
<pre><code>function fn()  
{  
    this.user = &apos;追梦子&apos;;  
    return 1;
}
var a = new fn;  
console.log(a.user); //追梦子

function fn()  
{  
    this.user = &apos;追梦子&apos;;  
    return undefined;
}
var a = new fn;  
console.log(a.user); //追梦子
</code></pre><p>什么意思呢？</p>
<p>**如果返回值是一个对象，那么this指向的就是那个返回的对象，如果返回值不是一个对象那么this还是指向函数的实例。</p>
<pre><code>function fn()  
{  
    this.user = &apos;追梦子&apos;;  
    return undefined;
}
var a = new fn;  
console.log(a); //fn {user: &quot;追梦子&quot;}
</code></pre><p>还有一点就是虽然null也是对象，但是在这里this还是指向那个函数的实例，因为null比较特殊。</p>
<pre><code>function fn()  
{  
    this.user = &apos;追梦子&apos;;  
    return null;
}
var a = new fn;  
console.log(a.user); //追梦子
</code></pre><h3 id="知识点补充："><a href="#知识点补充：" class="headerlink" title="知识点补充："></a>知识点补充：</h3><p>1.在严格版中的默认的this不再是window，而是undefined。</p>
<p>2.new操作符会改变函数this的指向问题，虽然我们上面讲解过了，但是并没有深入的讨论这个问题，网上也很少说，所以在这里有必要说一下。  </p>
<pre><code>function fn(){
    this.num = 1;
}
var a = new fn();
console.log(a.num); //1
</code></pre><p>为什么this会指向a？首先new关键字会创建一个空的对象，然后会自动调用一个函数apply方法，将this指向这个空对象，这样的话函数内部的this就会被这个空的对象替代。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/10/彻底理解JS中this的指向/" data-id="cizga355p00053cemxlkutgqy" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/10/彻底理解JS中this的指向/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/10/彻底理解JS中this的指向/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="扩展运算符的6-扩展运算符的6个重要用途" class="article article-type-扩展运算符的6" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/09/扩展运算符的6个重要用途/">个重要用途</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/09/扩展运算符的6个重要用途/">
            <time datetime="2017-02-09T09:12:04.000Z" itemprop="datePublished">2017-02-09</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/前端/">前端</a>, <a class="tag-link" href="/tags/技巧/">技巧</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>由于ES6和Babel的出现，编写JavaScript代码变得难以置信的灵活，从新的语法到自定的编译器，像JSX。我变成了扩展运算符(Spread Operator)的超级粉丝，三个点就改变你编写JavaScript代码的方式。接下来的清单，列出了我在JavaScript中最喜欢怎样使用扩展运算符！</p>
<h3 id="1-不使用Apply去调用函数"><a href="#1-不使用Apply去调用函数" class="headerlink" title="1.不使用Apply去调用函数"></a>1.不使用Apply去调用函数</h3><p>这一点我们叫它<code>Function.prototype.apply</code>，传递一个参数数组，调用一个函数，并把数组中的每一项拆分成单个参数传递给函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">`function doStuff (x, y, z) &#123; &#125;</div><div class="line">var args = [0, 1, 2]();</div><div class="line"></div><div class="line">// 调用函数，传递参数</div><div class="line">doStuff.apply(null, args);</div></pre></td></tr></table></figure>
<p><code>通过扩展运算符我们可以避免使用</code>apply`，只需简单的调用函数，并在参数数组前加上扩展运算符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`doStuff(...args);</div></pre></td></tr></table></figure>
<p><code>这让代码更简短、清晰，而且不需要无用的</code>null！`</p>
<h3 id="2-合并数组"><a href="#2-合并数组" class="headerlink" title="2.合并数组"></a>2.合并数组</h3><p>一直以来，有很多方法<a href="https://davidwalsh.name/combining-js-arrays" target="_blank" rel="external"> 合并数组 </a>，但是扩展运算符给了我们全新的方法去实现合并数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">`arr1.push(...arr2) // 把arr2合并到arr1的后面</div><div class="line">arr1.unshift(...arr2) //把arr2合并到arr1的前面</div></pre></td></tr></table></figure>
<p>`<br>如果你想在数组内合并数组，你可以像下面这样做：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">`var arr1 = [&apos;two&apos;, &apos;three&apos;]();</div><div class="line">var arr2 = [&apos;one&apos;, ...arr1, &apos;four&apos;, &apos;five&apos;]();</div><div class="line"></div><div class="line">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;]()</div></pre></td></tr></table></figure>
<p>`<br>比其他方法的语法更简单，还增加了位置的控制</p>
<h3 id="3-复制数组"><a href="#3-复制数组" class="headerlink" title="3.复制数组"></a>3.复制数组</h3><p>复制数组是我们常常要做的工作，在过去，我们会使用<code>Array.prototype.slice</code>去实现，但现在我们可以使用扩展运算符去得到一个复制后的数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">`var arr = [1,2,3]();</div><div class="line">var arr2 = [...arr](); // 就像 arr.slice()</div><div class="line">arr2.push(4)</div></pre></td></tr></table></figure>
<p>`</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/09/扩展运算符的6个重要用途/" data-id="cizga355r00063cembpz4l7kk" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/09/扩展运算符的6个重要用途/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/09/扩展运算符的6个重要用途/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="antd-以上版本「高清」方案设置" class="article article-type-antd" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/09/以上版本「高清」方案设置/">以上版本「高清」方案设置</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/09/以上版本「高清」方案设置/">
            <time datetime="2017-02-09T00:38:52.000Z" itemprop="datePublished">2017-02-09</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/前端/">前端</a>, <a class="tag-link" href="/tags/效率/">效率</a>, <a class="tag-link" href="/tags/移动/">移动</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h3 id="何为高清"><a href="#何为高清" class="headerlink" title="何为高清"></a>何为高清</h3><p>高清就是在高清屏的手机上，1px实际显示的物理像素不为1，到时页面显示是会有1px的像素偏差，尤其是边框，比较影响页面的显示效果</p>
<p>•    用脚本设置 html 的 viewport （不要再写 html meta 标签去设置 viewport）：在 html > head 里</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;head&gt;
 &lt;meta charset=&quot;utf-8&quot; /&gt;
 &lt;title&gt;title&lt;/title&gt;
 &lt;script&gt;/** 高清方案脚本 */&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>拷贝引入以下高清方案脚本，请内联写到所有 css 引用之前, 否则部分安卓机有问题（此脚本内部称为flex高清模式，支持任意等比缩放、兼容性好，其中原理请自己探索）：</p>
<pre><code>!function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p=&quot;&quot;,t(0)}([function(e,t){&quot;use strict&quot;;Object.defineProperty(t,&quot;__esModule&quot;,{value:!0});var i=window;t[&quot;default&quot;]=i.flex=function(e,t){var a=e||100,n=t||1,r=i.document,o=navigator.userAgent,d=o.match(/Android[\S\s]+AppleWebkit\/(\d{3})/i),l=o.match(/U3\/((\d+|\.){5,})/i),c=l&amp;&amp;parseInt(l[1].split(&quot;.&quot;).join(&quot;&quot;),10)&gt;=80,p=navigator.appVersion.match(/(iphone|ipad|ipod)/gi),s=i.devicePixelRatio||1;p||d&amp;&amp;d[1]&gt;534||c||(s=1);var u=1/s,m=r.querySelector(&apos;meta[name=&quot;viewport&quot;]&apos;);m||(m=r.createElement(&quot;meta&quot;),m.setAttribute(&quot;name&quot;,&quot;viewport&quot;),r.head.appendChild(m)),m.setAttribute(&quot;content&quot;,&quot;width=device-width,user-scalable=no,initial-scale=&quot;+u+&quot;,maximum-scale=&quot;+u+&quot;,minimum-scale=&quot;+u),r.documentElement.style.fontSize=a/2*s*n+&quot;px&quot;},e.exports=t[&quot;default&quot;]}]);
flex(100, 1);
</code></pre><p>附未压缩的<a href="https://os.alipayobjects.com/rmsportal/XKeZwTvyfsCqhRfcVIAY.js" title="源码链接" target="_blank" rel="external">源码链接</a></p>
<p>•    『新项目忽略』在已有的未做类似高清方案的项目 less 文件中对 px 单位做 2 倍处理，可以使用 gulp 脚本（如果不是使用 gulp，则推荐使用 webpack，相应配置方法见下条），在 gulpfile.js 加入以下代码：</p>
<pre><code>var gulp = require(&apos;gulp&apos;);
var replace = require(&apos;gulp-replace&apos;);
var gulpif = require(&apos;gulp-if&apos;);
var exec = require(&apos;child_process&apos;).exec;
var srcFiles = [
  &apos;./src/**/*.less&apos;
];
gulp.task(&apos;doublepx&apos;, function(done){
  gulp.src(srcFiles)
    .pipe(gulpif(true, replace(/[&apos;&quot;](\d+)px[&apos;&quot;]|\b(\d+)px\b/g, function(pixel) {
      console.log(pixel, &apos;=&gt;&apos;, ( parseInt(pixel) * 2 ) + &apos;px&apos;);
      if ( /&apos;|&quot;/.test(pixel) || &apos;0px&apos;== pixel || &apos;1px&apos; == pixel) {
        return pixel;
      }
      return ( parseInt(pixel) * 2 ) + &apos;px&apos;;
    })))
    .pipe(gulp.dest(&apos;./src&apos;));
  done();
});
gulp.task(&apos;default&apos;, [&apos;doublepx&apos;]);
</code></pre><p>•    随后新的样式值都写成和视觉稿上标注的值（视觉稿标注一般以设备物理点为单位，像 iPhone6 屏幕 750 的宽度）一样即可。</p>
<p>•    对于使用 webpack 的项目，在webpack.config.js里新增pxtorem配置、代码如下：</p>
<pre><code>const pxtorem = require(&apos;postcss-pxtorem&apos;);
 webpackConfig.postcss.push(pxtorem({
   rootValue: 100,
   propWhiteList: [],
 }));
</code></pre><p>•    至此，高清方案设置完毕（过程中相关依赖请自行npm install）。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/09/以上版本「高清」方案设置/" data-id="cizga355n00043cem6h1bwt92" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/09/以上版本「高清」方案设置/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/09/以上版本「高清」方案设置/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-gulp和webpack的完美结合" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/07/gulp和webpack的完美结合/">gulp和webpack的完美结合</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/07/gulp和webpack的完美结合/">
            <time datetime="2017-02-07T07:29:31.000Z" itemprop="datePublished">2017-02-07</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/前端/">前端</a>, <a class="tag-link" href="/tags/工具/">工具</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>gulp来实现实时监控文件的变化以及css相关处理<br>webpack则处理js</p>
<h3 id="包依赖-package-json"><a href="#包依赖-package-json" class="headerlink" title="包依赖(package.json)"></a>包依赖(package.json)</h3><pre><code>{
  &quot;name&quot;: &quot;gulp-temp&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;babel-core&quot;: &quot;^6.21.0&quot;,
    &quot;babel-loader&quot;: &quot;^6.2.10&quot;,
    &quot;babel-preset-es2015&quot;: &quot;^6.18.0&quot;,
    &quot;gulp&quot;: &quot;^3.9.1&quot;,
    &quot;gulp-autoprefixer&quot;: &quot;^3.1.1&quot;,
    &quot;gulp-concat&quot;: &quot;^2.6.1&quot;,
    &quot;gulp-cssnano&quot;: &quot;^2.1.2&quot;,
    &quot;gulp-less&quot;: &quot;^3.3.0&quot;,
    &quot;gulp-plumber&quot;: &quot;^1.1.0&quot;,
    &quot;gulp-postcss&quot;: &quot;^6.2.0&quot;,
    &quot;gulp-rename&quot;: &quot;^1.2.2&quot;,
    &quot;gulp-uglify&quot;: &quot;^2.0.0&quot;,
    &quot;gulp-webpack&quot;: &quot;^1.5.0&quot;,
    &quot;postcss-px2rem&quot;: &quot;^0.3.0&quot;,
    &quot;webpack&quot;: &quot;^1.14.0&quot;
  }
}
</code></pre><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><pre><code>const gulp = require(&apos;gulp&apos;);
const rename = require(&apos;gulp-rename&apos;);
const cssnano = require(&apos;gulp-cssnano&apos;);
const less = require(&apos;gulp-less&apos;);
const concat = require(&apos;gulp-concat&apos;);
const autoprefixer= require(&apos;gulp-autoprefixer&apos;);
const postcss = require(&apos;gulp-postcss&apos;);
const px2rem= require(&apos;postcss-px2rem&apos;);
var webpack = require(&apos;gulp-webpack&apos;);
var webpackConfig = require(&apos;./webpack.config.js&apos;)
gulp.task(&apos;handelCSS&apos;, function(){
    return gulp.src(&apos;app/css/*.less&apos;)
        .pipe(less())
        .pipe(postcss([px2rem({remUnit: 64})]))
        .pipe(autoprefixer({
            browsers: [ &apos;&gt;5%&apos;],
            cascade: false, //是否美化属性值 默认：true 像这样：
            //-webkit-transform: rotate(45deg);
            //        transform: rotate(45deg);
            remove:true //是否去掉不必要的前缀 默认：true
        }))
        .pipe(concat(&apos;app.css&apos;))
        .pipe(gulp.dest(&apos;dist/css&apos;))
        .pipe(cssnano())
        .pipe(rename(function(path){
            path.basename += &apos;.min&apos;;
        }))
        .pipe(gulp.dest(&apos;dist/css&apos;));
})
gulp.task(&apos;html&apos;, function() {
    return gulp.src(&apos;app/*.html&apos;) // 指明源文件路径、并进行文件匹配
        .pipe(gulp.dest(&apos;dist&apos;)); // 输出路径
});
gulp.task(&apos;handelJS&apos;, function(){
    return gulp.src(&apos;app/js/*.js&apos;)
        .pipe(webpack( webpackConfig ))//重点
        .pipe(gulp.dest(&apos;dist/&apos;))
})
// 监视文件变化，自动执行任务
gulp.task(&apos;watch&apos;, function(){
    gulp.watch(&apos;app/*.html&apos;, [&apos;html&apos;]);
    gulp.watch(&apos;app/css/*.less&apos;, [&apos;handelCSS&apos;]);
    gulp.watch(&apos;app/js/*.js&apos;, [&apos;handelJS&apos;]);
})
gulp.task(&apos;start&apos;, [&apos;handelJS&apos;, &apos;handelCSS&apos;, &apos;html&apos;]);
gulp.task(&apos;default&apos;,[&apos;start&apos;,&apos;watch&apos;]);
</code></pre><h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><pre><code>const path = require(&apos;path&apos;);
const webpack = require(&apos;webpack&apos;);
const ROOT_PATH = path.resolve(__dirname);
const APP_PATH = path.resolve(ROOT_PATH, &apos;app&apos;);
const BUILD_PATH = path.resolve(ROOT_PATH, &apos;dist&apos;);
module.exports = {
    entry: {
        app:APP_PATH+&apos;/js/index.js&apos;,
    },
    output: {
        path: BUILD_PATH,
        publicPath: &quot;./&quot;,
        filename: &apos;bundle.js&apos;
    },
    plugins: [
        // new CleanPlugin(&apos;build&apos;),
        new webpack.optimize.UglifyJsPlugin({
            compressor: {
                warnings: false,
            },
            sourceMap: true,
            except: [&apos;$super&apos;, &apos;$&apos;, &apos;exports&apos;, &apos;require&apos;] //排除关键字
        }),
        new webpack.optimize.OccurenceOrderPlugin(),
    ],
    module: {
        loaders: [

             {
                test: /\.jsx?$/,
                exclude: /(node_modules|bower_components)/,
                loader: &apos;babel&apos;,
                query: {
                    presets: [ &apos;es2015&apos;]
                },
            }]
    }
}
</code></pre>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/07/gulp和webpack的完美结合/" data-id="cizga355h00013cem9w3zpgw5" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/07/gulp和webpack的完美结合/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/07/gulp和webpack的完美结合/">评论</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-H5项目常见问题汇总及解决方案" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/02/07/H5项目常见问题汇总及解决方案/">H5项目常见问题汇总及解决方案</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/02/07/H5项目常见问题汇总及解决方案/">
            <time datetime="2017-02-07T05:39:03.000Z" itemprop="datePublished">2017-02-07</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/优化/">优化</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/前端/">前端</a>, <a class="tag-link" href="/tags/快捷方式/">快捷方式</a>, <a class="tag-link" href="/tags/效率/">效率</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h3 id="Meta基础知识："><a href="#Meta基础知识：" class="headerlink" title="Meta基础知识："></a>Meta基础知识：</h3><ul>
<li><p>H5页面窗口自动调整到设备宽度，并禁止用户缩放页面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//一、HTML页面结构</div><div class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span> /&gt;</div><div class="line">// width    设置viewport宽度，为一个正整数，或字符串‘device-width’</div><div class="line">// height   设置viewport高度，一般设置了宽度，会自动解析出高度，可以不用设置</div><div class="line">// initial-scale    默认缩放比例，为一个数字，可以带小数</div><div class="line">// minimum-scale    允许用户最小缩放比例，为一个数字，可以带小数</div><div class="line">// maximum-scale    允许用户最大缩放比例，为一个数字，可以带小数</div><div class="line">// user-scalable    是否允许手动缩放</div><div class="line"></div><div class="line">//二、JS动态判断</div><div class="line">var phoneWidth =  parseInt(window.screen.width);</div><div class="line">var phoneScale = phoneWidth/640;</div><div class="line">var ua = navigator.userAgent;</div><div class="line"><span class="keyword">if</span> (/Android (\d+\.\d+)/.test(ua))&#123;</div><div class="line">    var version = parseFloat(RegExp.<span class="variable">$1</span>);</div><div class="line">    <span class="keyword">if</span>(version&gt;2.3)&#123;</div><div class="line">        document.write(<span class="string">'&lt;meta name="viewport" content="width=640, minimum-scale = '</span>+phoneScale+<span class="string">', maximum-scale = '</span>+phoneScale+<span class="string">', target-densitydpi=device-dpi"&gt;'</span>);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        document.write(<span class="string">'&lt;meta name="viewport" content="width=640, target-densitydpi=device-dpi"&gt;'</span>);</div><div class="line">    &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    document.write(<span class="string">'&lt;meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi"&gt;'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>空白页基本meta标签</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 设置缩放 --&gt;</div><div class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1, user-scalable=no, minimal-ui"</span> /&gt;</div><div class="line">&lt;!-- 可隐藏地址栏，仅针对IOS的Safari（注：IOS7.0版本以后，safari上已看不到效果） --&gt;</div><div class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-capable"</span> content=<span class="string">"yes"</span> /&gt;</div><div class="line">&lt;!-- 仅针对IOS的Safari顶端状态条的样式（可选default/black/black-translucent ） --&gt;</div><div class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-status-bar-style"</span> content=<span class="string">"black"</span> /&gt;</div><div class="line">&lt;!-- IOS中禁用将数字识别为电话号码/忽略Android平台中对邮箱地址的识别 --&gt;</div><div class="line">&lt;meta name=<span class="string">"format-detection"</span>content=<span class="string">"telephone=no, email=no"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>其他meta标签</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 启用360浏览器的极速模式(webkit) --&gt;</div><div class="line">&lt;meta name=<span class="string">"renderer"</span> content=<span class="string">"webkit"</span>&gt;</div><div class="line">&lt;!-- 避免IE使用兼容模式 --&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>&gt;</div><div class="line">&lt;!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 --&gt;</div><div class="line">&lt;meta name=<span class="string">"HandheldFriendly"</span> content=<span class="string">"true"</span>&gt;</div><div class="line">&lt;!-- 微软的老式浏览器 --&gt;</div><div class="line">&lt;meta name=<span class="string">"MobileOptimized"</span> content=<span class="string">"320"</span>&gt;</div><div class="line">&lt;!-- uc强制竖屏 --&gt;</div><div class="line">&lt;meta name=<span class="string">"screen-orientation"</span> content=<span class="string">"portrait"</span>&gt;</div><div class="line">&lt;!-- QQ强制竖屏 --&gt;</div><div class="line">&lt;meta name=<span class="string">"x5-orientation"</span> content=<span class="string">"portrait"</span>&gt;</div><div class="line">&lt;!-- UC强制全屏 --&gt;</div><div class="line">&lt;meta name=<span class="string">"full-screen"</span> content=<span class="string">"yes"</span>&gt;</div><div class="line">&lt;!-- QQ强制全屏 --&gt;</div><div class="line">&lt;meta name=<span class="string">"x5-fullscreen"</span> content=<span class="string">"true"</span>&gt;</div><div class="line">&lt;!-- UC应用模式 --&gt;</div><div class="line">&lt;meta name=<span class="string">"browsermode"</span> content=<span class="string">"application"</span>&gt;</div><div class="line">&lt;!-- QQ应用模式 --&gt;</div><div class="line">&lt;meta name=<span class="string">"x5-page-mode"</span> content=<span class="string">"app"</span>&gt;</div><div class="line">&lt;!-- windows phone 点击无高光 --&gt;</div><div class="line">&lt;meta name=<span class="string">"msapplication-tap-highlight"</span> content=<span class="string">"no"</span>&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="常见问题："><a href="#常见问题：" class="headerlink" title="常见问题："></a>常见问题：</h3><ul>
<li><p>移动端如何定义字体font-family</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@ --------------------------------------中文字体的英文名称</div><div class="line">@ 宋体      SimSun</div><div class="line">@ 黑体      SimHei</div><div class="line">@ 微信雅黑   Microsoft Yahei</div><div class="line">@ 微软正黑体 Microsoft JhengHei</div><div class="line">@ 新宋体    NSimSun</div><div class="line">@ 新细明体  MingLiU</div><div class="line">@ 细明体    MingLiU</div><div class="line">@ 标楷体    DFKai-SB</div><div class="line">@ 仿宋     FangSong</div><div class="line">@ 楷体     KaiTi</div><div class="line">@ 仿宋_GB2312  FangSong_GB2312</div><div class="line">@ 楷体_GB2312  KaiTi_GB2312  </div><div class="line">@</div><div class="line">@ 说明：中文字体多数使用宋体、雅黑，英文用Helvetica</div><div class="line"> </div><div class="line">body &#123; font-family: Microsoft Yahei,SimSun,Helvetica; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>打电话发短信写邮件怎么实现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// 一、打电话</div><div class="line">&lt;a href=<span class="string">"tel:0755-10086"</span>&gt;打电话给:0755-10086&lt;/a&gt;</div><div class="line"> </div><div class="line">//  二、发短信，winphone系统无效</div><div class="line">&lt;a href=<span class="string">"sms:10086"</span>&gt;发短信给: 10086&lt;/a&gt;</div><div class="line"> </div><div class="line">// 三、写邮件</div><div class="line">//注：在添加这些功能时，第一个功能以<span class="string">"?"</span>开头，后面的以<span class="string">"&amp;"</span>开头</div><div class="line">//1.普通邮件</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//2.收件地址后添加?cc=开头，可添加抄送地址（Android存在兼容问题）</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com?cc=zhangqian0406@yeah.net"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//3.跟着抄送地址后，写上&amp;bcc=,可添加密件抄送地址（Android存在兼容问题）</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com?cc=zhangqian0406@yeah.net&amp;bcc=384900096@qq.com"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//4.包含多个收件人、抄送、密件抄送人，用分号(;)隔开多个邮件人的地址</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com;384900096@qq.com"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//5.包含主题，用?subject=</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com?subject=邮件主题"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//6.包含内容，用?body=;如内容包含文本，使用%0A给文本换行 </div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com?body=邮件主题内容%0A腾讯诚信%0A期待您的到来"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//7.内容包含链接，含http(s)://等的文本自动转化为链接</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com?body=http://www.baidu.com"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//8.内容包含图片（PC不支持）</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com?body=&lt;img src='images/1.jpg' /&gt;"</span>&gt;点击我发邮件&lt;/a&gt;</div><div class="line">//9.完整示例</div><div class="line">&lt;a href=<span class="string">"mailto:863139978@qq.com;384900096@qq.com?cc=zhangqian0406@yeah.net&amp;bcc=993233461@qq.com&amp;subject=[邮件主题]&amp;body=腾讯诚邀您参与%0A%0Ahttp://www.baidu.com%0A%0A&lt;img src='images/1.jpg' /&gt;"</span>&gt;点击我发邮件&lt;/a&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>移动端touch事件（区分webkit和winphone）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">/* 当用户手指放在移动设备在屏幕上滑动会触发的touch事件 */</div><div class="line">// 以下支持webkit</div><div class="line">touchstart——当手指触碰屏幕时候发生。不管当前有多少只手指</div><div class="line">touchmove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用event的preventDefault()可以阻止默认情况的发生：阻止页面滚动</div><div class="line">touchend——当手指离开屏幕时触发</div><div class="line">touchcancel——系统停止跟踪触摸时候会触发。例如在触摸过程中突然页面alert()一个提示框，此时会触发该事件，这个事件比较少用</div><div class="line"> </div><div class="line">//TouchEvent说明：</div><div class="line">touches：屏幕上所有手指的信息</div><div class="line">targetTouches：手指在目标区域的手指信息</div><div class="line">changedTouches：最近一次触发该事件的手指信息</div><div class="line">touchend时，touches与targetTouches信息会被删除，changedTouches保存的最后一次的信息，最好用于计算手指信息</div><div class="line"> </div><div class="line">//参数信息(changedTouches[0])</div><div class="line">clientX、clientY在显示区的坐标</div><div class="line">target：当前元素</div><div class="line"> </div><div class="line">//事件响应顺序</div><div class="line">ontouchstart  &gt; ontouchmove  &gt; ontouchend &gt; onclick</div><div class="line"> </div><div class="line">// 以下支持winphone 8</div><div class="line">MSPointerDown——当手指触碰屏幕时候发生。不管当前有多少只手指</div><div class="line">MSPointerMove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用css的html&#123;-ms-touch-action: none;&#125;可以阻止默认情况的发生：阻止页面滚动</div><div class="line">MSPointerUp——当手指离开屏幕时触发</div></pre></td></tr></table></figure>
</li>
<li><p>移动端click屏幕产生200-300ms的延时响应</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">说明：移动设备上的web网页是有300ms延迟的，玩玩会造成按钮点击延迟甚至是点击失效。</div><div class="line"> </div><div class="line">以下是历史原因，来源一个公司内一个同事的分享：</div><div class="line">2007年苹果发布首款iphone上IOS系统搭载的safari为了将适用于PC端上大屏幕的网页能比较好的展示在手机端上，使用了双击缩放(double tap to zoom)的方案，比如你在手机上用浏览器打开一个PC上的网页，你可能在看到页面内容虽然可以撑满整个屏幕，但是字体、图片都很小看不清，此时可以快速双击屏幕上的某一部分，你就能看清该部分放大后的内容，再次双击后能回到原始状态。</div><div class="line"> </div><div class="line">双击缩放是指用手指在屏幕上快速点击两次，iOS 自带的 Safari 浏览器会将网页缩放至原始比例。</div><div class="line"> </div><div class="line">原因就出在浏览器需要如何判断快速点击上，当用户在屏幕上单击某一个元素时候，例如跳转链接&lt;a href=<span class="string">"#"</span>&gt;&lt;/a&gt;，此处浏览器会先捕获该次单击，但浏览器不能决定用户是单纯要点击链接还是要双击该部分区域进行缩放操作，所以，捕获第一次单击后，浏览器会先Hold一段时间t，如果在t时间区间里用户未进行下一次点击，则浏览器会做单击跳转链接的处理，如果t时间里用户进行了第二次单击操作，则浏览器会禁止跳转，转而进行对该部分区域页面的缩放操作。那么这个时间区间t有多少呢？在IOS safari下，大概为300毫秒。这就是延迟的由来。造成的后果用户纯粹单击页面，页面需要过一段时间才响应，给用户慢体验感觉，对于web开发者来说是，页面js捕获click事件的回调函数处理，需要300ms后才生效，也就间接导致影响其他业务逻辑的处理。</div><div class="line"> </div><div class="line">//解决方案：</div><div class="line">fastclick可以解决在手机上点击事件的300ms延迟</div><div class="line">zepto的touch模块，tap事件也是为了解决在click的延迟问题</div></pre></td></tr></table></figure>
</li>
<li><p>Rentina显示屏原理及设计方案<br>  说明：retina屏是一种具备超高像素密度的液晶屏，同样大小的屏幕上显示的像素点由1个变为多个，如在同样带下的屏幕上，苹果设备的retina显示屏中，像素点1个变为4个。<br>  在高清显示屏中的位图被放大，图片会变得模糊，因此移动端的视觉稿通常会设计为传统PC的2倍。<br>  那么，前端的应对方案是：设计稿切出来的图片长宽保证为偶数，并使用backgroud-size把图片缩小为原来的1/2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//例如图片宽高为：200px*200px，那么写法如下</div><div class="line">.css&#123;width:100px;height:100px;background-size:100px 100px;&#125;</div><div class="line">//其它元素的取值为原来的1/2，例如视觉稿40px的字体，使用样式的写法为20px</div><div class="line">.css&#123;font-size:20px&#125;</div><div class="line"> </div><div class="line">//image-set设计Rentina背景图</div><div class="line">image-set,webkit私有属性，也是CSS4的属性，为解决Rentina屏幕下的图像而生。</div><div class="line">.css &#123;</div><div class="line">    background: url(images/bg.jpg) no-repeat center;</div><div class="line">    background: -webkit-image-set(</div><div class="line">    url(images/bg.jpg) 1x,     //支持image-set普通屏</div><div class="line">    url(images/<span class="built_in">bg</span>-2x.jpg) 2x); //支持image-set的Rentinan</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>点击元素产生背景或边框怎么去掉</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/ios用户点击一个链接，会出现一个半透明灰色遮罩, 如果想要禁用，可设置-webkit-tap-highlight-color的alpha值为0去除灰色半透明遮罩；</div><div class="line">//android用户点击一个链接，会出现一个边框或者半透明灰色遮罩, 不同生产商定义出来额效果不一样，可设置-webkit-tap-highlight-color的alpha值为0去除部分机器自带的效果；</div><div class="line">//winphone系统,点击标签产生的灰色半透明背景，能通过设置&lt;meta name=<span class="string">"msapplication-tap-highlight"</span> content=<span class="string">"no"</span>&gt;去掉；</div><div class="line">//特殊说明：有些机型去除不了，如小米2。对于按钮类还有个办法，不使用a或者input标签，直接用div标签</div><div class="line">a,button,input,textarea &#123; </div><div class="line">    -webkit-tap-highlight-color: rgba(0,0,0,0); </div><div class="line">    -webkit-user-modify:<span class="built_in">read</span>-write-plaintext-only; //-webkit-user-modify有个副作用，就是输入法不再能够输入多个字符</div><div class="line">&#125;   </div><div class="line">// 也可以 </div><div class="line">* &#123; -webkit-tap-highlight-color: rgba(0,0,0,0); &#125;</div><div class="line">//winphone下</div><div class="line">&lt;meta name=<span class="string">"msapplication-tap-highlight"</span> content=<span class="string">"no"</span>&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>美化表单元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//一、使用appearance改变webkit浏览器的默认外观</div><div class="line">input,select &#123; -webkit-appearance:none; appearance: none; &#125;</div><div class="line"> </div><div class="line">//二、winphone下，使用伪元素改变表单元素默认外观</div><div class="line">//1.禁用select默认箭头，::-ms-expand修改表单控件下拉箭头，设置隐藏并使用背景图片来修饰</div><div class="line">select::-ms-expand &#123; display:none; &#125;</div><div class="line"> </div><div class="line">//2.禁用radio和checkbox默认样式，::-ms-check修改表单复选框或单选框默认图标，设置隐藏并使用背景图片来修饰</div><div class="line">input[<span class="built_in">type</span>=radio]::-ms-check,</div><div class="line">input[<span class="built_in">type</span>=checkbox]::-ms-check &#123; display:none; &#125;</div><div class="line"></div><div class="line">//3.禁用pc端表单输入框默认清除按钮，::-ms-clear修改清除按钮，设置隐藏并使用背景图片来修饰</div><div class="line">input[<span class="built_in">type</span>=text]::-ms-clear,</div><div class="line">input[<span class="built_in">type</span>=tel]::-ms-clear,</div><div class="line">input[<span class="built_in">type</span>=number]::-ms-clear &#123; display:none; &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>移动端字体单位font-size选择px还是rem</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">// 如需适配多种移动设备，建议使用rem。以下为参考值：</div><div class="line">html &#123; font-size: 62.5%; &#125;   //10*16 = 62.5%</div><div class="line">//设置12px字体   这里注意在rem前要加上对应的px值，解决不支持rem的浏览器的兼容问题，做到优雅降级</div><div class="line">body &#123; font-size:12px; font-size:1.2rem; &#125;     </div><div class="line">超实用的CSS样式</div><div class="line">//去掉webkit的滚动条——display: none;</div><div class="line">//其他参数</div><div class="line">::-webkit-scrollba //滚动条整体部分</div><div class="line">::-webkit-scrollbar-thumb   //滚动条内的小方块</div><div class="line">::-webkit-scrollbar-track   //滚动条轨道</div><div class="line">::-webkit-scrollbar-button  //滚动条轨道两端按钮</div><div class="line">::-webkit-scrollbar-track-piece  //滚动条中间部分，内置轨道</div><div class="line">::-webkit-scrollbar-corner       //边角，两个滚动条交汇处</div><div class="line">::-webkit-resizer            //两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</div><div class="line"> </div><div class="line">// 禁止长按链接与图片弹出菜单</div><div class="line">a,img &#123; -webkit-touch-callout: none &#125;    </div><div class="line"> </div><div class="line">// 禁止ios和android用户选中文字</div><div class="line">html,body &#123;-webkit-user-select:none; user-select: none; &#125;</div><div class="line"> </div><div class="line">// 改变输入框placeholder的颜色值</div><div class="line">::-webkit-input-placeholder &#123; /* WebKit browsers */</div><div class="line">color: <span class="comment">#999; &#125;</span></div><div class="line">:-moz-placeholder &#123; /* Mozilla Firefox 4 to 18 */</div><div class="line">color: <span class="comment">#999; &#125;</span></div><div class="line">::-moz-placeholder &#123; /* Mozilla Firefox 19+ */</div><div class="line">color: <span class="comment">#999; &#125;</span></div><div class="line">:-ms-input-placeholder &#123; /* Internet Explorer 10+ */</div><div class="line">color: <span class="comment">#999; &#125;</span></div><div class="line">input:focus::-webkit-input-placeholder&#123; color:<span class="comment">#999; &#125;</span></div><div class="line"> </div><div class="line">// android上去掉语音输入按钮</div><div class="line">input::-webkit-input-speech-button &#123;display: none&#125;</div><div class="line"> </div><div class="line">// 阻止windows Phone的默认触摸事件</div><div class="line">/*说明：winphone下默认触摸事件事件使用e.preventDefault是无效的，可通过样式来禁用，如：*/</div><div class="line">html &#123; -ms-touch-action:none; &#125; //禁止winphone默认触摸事件</div></pre></td></tr></table></figure>
</li>
</ul>
<p>*取消input在ios下，输入的时候英文首字母的默认大写<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input autocapitalize=<span class="string">"off"</span> autocorrect=<span class="string">"off"</span> /&gt;</div></pre></td></tr></table></figure></p>
<ul>
<li>手机拍照和上传图片<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//IOS有拍照、录像、选取本地图片功能，部分Android只有选择本地图片功能。Winphone不支持</div><div class="line">&lt;input <span class="built_in">type</span>=<span class="string">"file"</span> accept=<span class="string">"images/*"</span> /&gt;</div><div class="line">&lt;input <span class="built_in">type</span>=<span class="string">"file"</span> accept=<span class="string">"video/*"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>*屏幕旋转的事件和样式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//JS处理</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">orientInit</span></span>()&#123;</div><div class="line">    var orientChk = document.documentElement.clientWidth &gt; document.documentElement.clientHeight?<span class="string">'landscape'</span>:<span class="string">'portrait'</span>;</div><div class="line">    <span class="keyword">if</span>(orientChk ==<span class="string">'lapdscape'</span>)&#123;</div><div class="line">        //这里是横屏下需要执行的事件</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        //这里是竖屏下需要执行的事件</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">orientInit();</div><div class="line">window.addEventListener(<span class="string">'onorientationchange'</span> <span class="keyword">in</span> window?<span class="string">'orientationchange'</span>:<span class="string">'resize'</span>, <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    <span class="built_in">set</span>Timeout(orientInit, 100);</div><div class="line">&#125;,<span class="literal">false</span>)    </div><div class="line"> </div><div class="line">//CSS处理</div><div class="line">//竖屏时样式</div><div class="line">@media all and (orientation:portrait)&#123;   &#125;</div><div class="line">//横屏时样式</div><div class="line">@media all and (orientation:landscape)&#123;   &#125;</div></pre></td></tr></table></figure></p>
<p>*audio元素和video元素在ios和andriod中无法自动播放<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//音频，写法一</div><div class="line">&lt;audio src=<span class="string">"music/bg.mp3"</span> autoplay loop controls&gt;你的浏览器还不支持哦&lt;/audio&gt;</div><div class="line"> </div><div class="line">//音频，写法二</div><div class="line">&lt;audio controls=<span class="string">"controls"</span>&gt; </div><div class="line">    &lt;<span class="built_in">source</span> src=<span class="string">"music/bg.ogg"</span> <span class="built_in">type</span>=<span class="string">"audio/ogg"</span>&gt;&lt;/<span class="built_in">source</span>&gt;</div><div class="line">    &lt;<span class="built_in">source</span> src=<span class="string">"music/bg.mp3"</span> <span class="built_in">type</span>=<span class="string">"audio/mpeg"</span>&gt;&lt;/<span class="built_in">source</span>&gt;</div><div class="line">    优先播放音乐bg.ogg，不支持在播放bg.mp3</div><div class="line">&lt;/audio&gt;</div><div class="line"> </div><div class="line">//JS绑定自动播放（操作window时，播放音乐）</div><div class="line">$(window).one(<span class="string">'touchstart'</span>, <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    music.play();</div><div class="line">&#125;)</div><div class="line"> </div><div class="line">//微信下兼容处理</div><div class="line">document.addEventListener(<span class="string">"WeixinJSBridgeReady"</span>, <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    music.play();</div><div class="line">&#125;, <span class="literal">false</span>);</div><div class="line"> </div><div class="line">//小结</div><div class="line">//1.audio元素的autoplay属性在IOS及Android上无法使用，在PC端正常</div><div class="line">//2.audio元素没有设置controls时，在IOS及Android会占据空间大小，而在PC端Chrome是不会占据任何空间</div></pre></td></tr></table></figure></p>
<ul>
<li>重力感应事件<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// 运用HTML5的deviceMotion，调用重力感应事件</div><div class="line"><span class="keyword">if</span>(window.DeviceMotionEvent)&#123;</div><div class="line">    document.addEventListener(<span class="string">'devicemotion'</span>, deviceMotionHandler, <span class="literal">false</span>)</div><div class="line">&#125;   </div><div class="line"> </div><div class="line">var speed = 30;</div><div class="line">var x = y = z = lastX = lastY = lastZ = 0;</div><div class="line"><span class="keyword">function</span> deviceMotionHandler(eventData)&#123;</div><div class="line">    var acceleration = event.accelerationIncludingGravity;</div><div class="line">    x = acceleration.x;</div><div class="line">    y = acceleration.y; </div><div class="line">    z = acceleration.z;</div><div class="line">    <span class="keyword">if</span>(Math.abs(x-lastX)&gt;speed || Math.abs(y-lastY)&gt;speed || Math.abs(z-lastZ)&gt;speed )&#123;</div><div class="line">        //这里是摇动后要执行的方法 </div><div class="line">        yaoAfter();</div><div class="line">    &#125;</div><div class="line">    lastX = x;</div><div class="line">    lastY = y;</div><div class="line">    lastZ = z;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">yaoAfter</span></span>()&#123;</div><div class="line">    //<span class="keyword">do</span> something</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>*微信浏览器用户调整字体大小后页面矬了，怎么阻止用户调整<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">//以下代码可使Android机页面不再受用户字体缩放强制改变大小，但是会有1S左右延时，期间可以考虑loading来处理</div><div class="line"><span class="keyword">if</span> (typeof(WeixinJSBridge) == <span class="string">"undefined"</span>) &#123;</div><div class="line">    document.addEventListener(<span class="string">"WeixinJSBridgeReady"</span>, <span class="keyword">function</span> (e) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">            WeixinJSBridge.invoke(<span class="string">'setFontSizeCallback'</span>, &#123; <span class="string">'fontSize'</span>:0&#125;, <span class="keyword">function</span>(res)&#123;</div><div class="line">                alert(JSON.stringify(res));</div><div class="line">            &#125;)</div><div class="line">        &#125;, 0)</div><div class="line">    &#125;);</div><div class="line">&#125;<span class="keyword">else</span>&#123;  </div><div class="line">    <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">        WeixinJSBridge.invoke(<span class="string">'setFontSizeCallback'</span>, &#123; <span class="string">'fontSize'</span>:0&#125;, <span class="keyword">function</span>(res)&#123;</div><div class="line">            alert(JSON.stringify(res));</div><div class="line">        &#125;)</div><div class="line">    &#125;, 0)   </div><div class="line">&#125;</div><div class="line"> </div><div class="line">//IOS下可使用 -webkit-text-size-adjust禁止用户调整字体大小</div><div class="line">body &#123; -webkit-text-size-adjust:100%!important; &#125;</div><div class="line"> </div><div class="line">//最好的解决方案：最好使用rem或百分比布局</div></pre></td></tr></table></figure></p>
<ul>
<li><p>定位的坑</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">//fixed定位</div><div class="line">//1.ios下fixed元素容易定位出错，软键盘弹出时，影响fixed元素定位</div><div class="line">//2.android下fixed表现要比iOS更好，软键盘弹出时，不会影响fixed元素定位</div><div class="line">//3.ios4下不支持position:fixed</div><div class="line">//解决方案：使用[Iscroll](http://cubiq.org/iscroll-5)，如：</div><div class="line">&lt;div id=<span class="string">"wrapper"</span>&gt;</div><div class="line">        &lt;ul&gt;</div><div class="line">               &lt;li&gt;&lt;/li&gt;</div><div class="line">               .....</div><div class="line">        &lt;/ul&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;script src=<span class="string">"iscroll.js"</span>&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var myscroll;</div><div class="line">    <span class="keyword">function</span> <span class="function"><span class="title">loaded</span></span>()&#123;</div><div class="line">        myscroll=new iScroll(<span class="string">"wrapper"</span>);</div><div class="line">    &#125;</div><div class="line">    window.addEventListener(<span class="string">"DOMContentLoaded"</span>,loaded,<span class="literal">false</span>);</div><div class="line">&lt;/script&gt;</div><div class="line"> </div><div class="line"> </div><div class="line">//position定位</div><div class="line">//Android下弹出软键盘弹出时，影响absolute元素定位</div><div class="line">//解决方案:</div><div class="line">var ua = navigator.userAgent.indexOf(<span class="string">'Android'</span>);</div><div class="line"><span class="keyword">if</span>(ua&gt;-1)&#123;</div><div class="line">    $(<span class="string">'.ipt'</span>).on(<span class="string">'focus'</span>, <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">        $(<span class="string">'.css'</span>).css(&#123;<span class="string">'visibility'</span>:<span class="string">'hidden'</span>&#125;)</div><div class="line">    &#125;).on(<span class="string">'blur'</span>, <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">        $(<span class="string">'.css'</span>).css(&#123;<span class="string">'visibility'</span>:<span class="string">'visible'</span>&#125;)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>播放视频不全屏</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!--</div><div class="line">1.ios7+支持自动播放</div><div class="line">2.支持Airplay的设备（如：音箱、Apple TV)播放</div><div class="line">x-webkit-airplay=<span class="string">"true"</span> </div><div class="line">3.播放视频不全屏</div><div class="line">webkit-playsinline=<span class="string">"true"</span> </div><div class="line">--&gt;</div><div class="line">&lt;video x-webkit-airplay=<span class="string">"true"</span> webkit-playsinline=<span class="string">"true"</span> preload=<span class="string">"auto"</span> autoplay src=<span class="string">"http://"</span>&gt;&lt;/video&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>*JS判断设备<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">deviceType</span></span>()&#123;</div><div class="line">    var ua = navigator.userAgent;</div><div class="line">    var agent = [<span class="string">"Android"</span>, <span class="string">"iPhone"</span>, <span class="string">"SymbianOS"</span>, <span class="string">"Windows Phone"</span>, <span class="string">"iPad"</span>, <span class="string">"iPod"</span>];    </div><div class="line">    <span class="keyword">for</span>(var i=0; i&lt;len,len = agent.length; i++)&#123;</div><div class="line">        <span class="keyword">if</span>(ua.indexOf(agent[i])&gt;0)&#123;         </div><div class="line">            <span class="built_in">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">deviceType();</div><div class="line">window.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    deviceType();</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>*JS判断微信浏览器<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">isWeixin</span></span>()&#123;</div><div class="line">    var ua = navigator.userAgent.toLowerCase();</div><div class="line">    <span class="keyword">if</span>(ua.match(/MicroMessenger/i)==<span class="string">'micromessenger'</span>)&#123;</div><div class="line">        <span class="built_in">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>*android 2.3 bug<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//1.@-webkit-keyframes 需要以0%开始100%结束，0%的百分号不能去掉</div><div class="line">//2.after和before伪类无法使用动画animation</div><div class="line">//3.border-radius不支持%单位，如要兼容，可以给radius设置一下较大的值</div><div class="line">//4.translate百分比的写法和scale在一起会导致失效，例如：</div><div class="line">-webkit-transform: translate(-50%,-50%) scale(-0.5, 1)</div></pre></td></tr></table></figure></p>
<ul>
<li><p>android 4.x bug</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//1.三星 Galaxy S4中自带浏览器不支持border-radius缩写</div><div class="line">//2.同时设置border-radius和背景色的时候，背景色会溢出到圆角以外部分</div><div class="line">//3.部分手机(如三星)，a链接支持鼠标:visited事件，也就是说链接访问后文字变为紫色</div><div class="line">//4.android无法同时播放多音频audio</div></pre></td></tr></table></figure>
</li>
<li><p>消除transition闪屏</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.css &#123;</div><div class="line">    -webkit-transform-style: preserve-3d;</div><div class="line">    -webkit-backface-visibility: hidden;</div><div class="line">    -webkit-perspective: 1000;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>*开启硬件加速<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//目前，像Chrome/Filefox/Safari/IE9+以及最新版本Opera都支持硬件加速，当检测到某个DOM元素应用了某些CSS规则时就会自动开启，从而解决页面闪白，保证动画流畅。</div><div class="line">.css &#123;</div><div class="line">    -webkit-transform: translate3d(0,0,0);</div><div class="line">    -moz-transform: translate3d(0,0,0);</div><div class="line">    -ms-transform: translate3d(0,0,0);</div><div class="line">    transform: translate3d(0,0,0);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>渲染优化<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//1.禁止使用iframe（阻塞父文档onload事件）</div><div class="line">//2.禁止使用gif图片实现loading效果（降低CPU消耗，提升渲染性能）</div><div class="line">//使用CSS3代码代替JS动画；</div><div class="line">//开启GPU加速；</div><div class="line">//使用base64位编码图片(不小图而言，大图不建议使用)</div><div class="line">    // 对于一些小图标，可以使用base64位编码，以减少网络请求。但不建议大图使用，比较耗费CPU。小图标优势在于：</div><div class="line">    //1.减少HTTP请求；</div><div class="line">    //2.避免文件跨域；</div><div class="line">    //3.修改及时生效；</div></pre></td></tr></table></figure>
</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://kingdee88.github.io/2017/02/07/H5项目常见问题汇总及解决方案/" data-id="cizga355b00003cem9kza6g65" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://kingdee88.github.io/2017/02/07/H5项目常见问题汇总及解决方案/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://kingdee88.github.io/2017/02/07/H5项目常见问题汇总及解决方案/">评论</a>
    

        </footer>
    </div>
    
</article>


</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/02/22/全面解析Javascript-this/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/02/22/全面解析Javascript-this/" class="title">全面解析Javascript-this</a></p>
                            <p class="item-date"><time datetime="2017-02-22T00:56:46.000Z" itemprop="datePublished">2017-02-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/02/17/缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串/" class="title">缓存算法，数组去重、数组随机抽取、字母串转数字，数字转字符串</a></p>
                            <p class="item-date"><time datetime="2017-02-17T01:07:56.000Z" itemprop="datePublished">2017-02-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/02/10/彻底理解JS中this的指向/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/02/10/彻底理解JS中this的指向/" class="title">彻底理解JS中this的指向</a></p>
                            <p class="item-date"><time datetime="2017-02-10T01:34:40.000Z" itemprop="datePublished">2017-02-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/02/09/扩展运算符的6个重要用途/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/02/09/扩展运算符的6个重要用途/" class="title">个重要用途</a></p>
                            <p class="item-date"><time datetime="2017-02-09T09:12:04.000Z" itemprop="datePublished">2017-02-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/02/09/以上版本「高清」方案设置/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/02/09/以上版本「高清」方案设置/" class="title">以上版本「高清」方案设置</a></p>
                            <p class="item-date"><time datetime="2017-02-09T00:38:52.000Z" itemprop="datePublished">2017-02-09</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/优化/">优化</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">7</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快捷方式/">快捷方式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技巧/">技巧</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/效率/">效率</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动/">移动</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/javascript/" style="font-size: 16.67px;">javascript</a> <a href="/tags/前端/" style="font-size: 20px;">前端</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/快捷方式/" style="font-size: 10px;">快捷方式</a> <a href="/tags/技巧/" style="font-size: 13.33px;">技巧</a> <a href="/tags/效率/" style="font-size: 13.33px;">效率</a> <a href="/tags/移动/" style="font-size: 10px;">移动</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://github.com/kingdee88">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 kingdee<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
        this.page.identifier = 'undefined';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hexo-theme-icarus' + '.disqus.com/count.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>